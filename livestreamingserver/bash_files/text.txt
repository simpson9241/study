worker_processes  1;

events {

    worker_connections  1024;

}

rtmp{
	server{
	listen 1935;
	chunk_size 4096;

	application live{
	live on;
	record off;
	}

	application hls{
	live on;
	hls on;
	hls_path /home/inisoft/vod/;
	hls_cleanup off;
  }
}
}

http {

    include       mime.types;

    default_type  application/octet-stream;
    keepalive_timeout  65;

    server {

        listen       80;

        server_name  localhost;

        location / {
            index  index.html index.htm;

        }



        # vod settings

        vod_mode local;

        vod_fallback_upstream_location /fallback;

        vod_last_modified 'Sun, 19 Nov 2000 08:52:00 GMT';

        vod_last_modified_types *;

        vod_metadata_cache metadata_cache 512m;

        vod_response_cache response_cache 128m;

        gzip on;

        gzip_types application/vnd.apple.mpegurl;



        vod_segment_duration 1000;



        open_file_cache          max=1000 inactive=5m;

        open_file_cache_valid    2m;

        open_file_cache_min_uses 1;

        open_file_cache_errors   on;

        aio on;

        location /vod/ {

                root /home/inisoft/;

                vod hls;

                add_header Access-Control-Allow-Headers '*';

                add_header Access-Control-Expose-Headers 'Server,range,Content-Length,Content-Range';

                add_header Access-Control-Allow-Methods 'GET, HEAD, OPTIONS';

                add_header Access-Control-Allow-Origin '*';

                expires 100d;

        }

    }

}
